<!doctype html><html><head><meta charset="utf-8"><title>Reset Password</title></head><body>
<div class="card">
  <h2>Reset Password</h2>
  <input id="new-pass" type="password" placeholder="New password">
  <button id="save-pass">Save Password</button>
</div>
<script src="js/api.js"></script>
<script>
function qs(name){ const u=new URL(location.href); return u.searchParams.get(name); }
const token = qs('token') || '';
document.getElementById('save-pass').addEventListener('click', async ()=>{
  const pw = document.getElementById('new-pass').value.trim();
  if(!pw){ alert('Enter password'); return; }
  try {
    const res = await window.api.reset(token,pw);
    if (res && res.success) { alert('Password updated'); location.href='auth.html'; }
  } catch(err){ alert(err.message || 'Reset failed'); }
});
</script>
</body></html>
